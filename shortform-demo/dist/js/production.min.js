DEV={VERSION:"v20190302.4"};var origin=window.origin?window.origin:window.location.origin;function PlayCtrl(a,e,i,t){a.noWordsForReview=!1,a.getNextAvailableWord=function(){a.quizCtrl.loading=!0,t.getAll().then(function(e){var t=moment();console.log("now.format(): ",t.utc().format());var r=e.data.words;console.log("words: ",r);var o=_.filter(r,function(e){return e.currentBin<11&&(0===e.currentBin||moment(e.nextReviewDate).isSameOrBefore(t))});console.log("filtered: ",o);var n=_.reverse(_.sortBy(o,"currentBin"));if(n.length)console.log("first word ready for review"),a.noWordsForReview=!1,i(function(){a.quizCtrl.loading=!1,a.quizCtrl.currentWord=n[0]},0);else{_.remove(r,function(e){return 10<e.currentBin});r.length?a.noWordsForReview="You are temporarily done; please come back later to review more words.":a.noWordsForReview="You have no more words to review; you are permanently done!",console.log("first word not ready for review"),i(function(){a.quizCtrl.loading=!1},0)}},function(e){console.log("err: ",e)})},a.quizCtrl={currentWord:null,revealed:!1,markCorrect:function(){var e=moment();switch(this.currentWord.numCorrect++,this.currentWord.currentBin++,this.currentWord.currentBin){case 0:console.error("noop");break;case 1:e.add(5,"seconds");break;case 2:e.add(25,"seconds");break;case 3:e.add(2,"minutes");break;case 4:e.add(10,"minutes");break;case 5:e.add(1,"hours");break;case 6:e.add(5,"hours");break;case 7:e.add(1,"days");break;case 8:e.add(5,"days");break;case 9:e.add(25,"days");break;case 10:e.add(4,"months");break;case 11:e.add(100,"years");break;default:console.error("noop")}this.currentWord.nextReviewDate=e.format(),this.submit()},markWrong:function(){this.currentWord.currentBin=1,this.currentWord.numWrong++,10<=this.currentWord.numWrong?this.currentWord.currentBin=12:this.currentWord.nextReviewDate=moment().add(5,"seconds").format(),this.submit()},submit:function(){this.revealed=!1,this.loading=!0;var e=angular.copy(this.currentWord);this.currentWord=null,t.updateOne(e._id,e).then(function(e){a.getNextAvailableWord()},function(e){a.getNextAvailableWord()})},loading:!0},a.getNextAvailableWord()}function RootCtrl(e,t){e.state=t}function SettingsCtrl(t,e,r,o){function n(){o.getAll().then(function(e){console.log("Words.getAll response: ",e),e.data.success?r(function(){t.words=e.data.words},0):console.log("err: ",e.data.msg)},function(e){console.log("err: ",e)})}n(),t.newWordComposer={name:"",definition:"",statusMsg:"",submit:function(){var t=this;o.createOne({name:this.name,definition:this.definition}).then(function(e){console.log("Words.createOne response: ",e),r(function(){t.name="",t.definition="",t.statusMsg="Successfully added new word.",n()},0)},function(e){t.statusMsg="Unable to add new word."})}},t.deleteWord=function(e){o.deleteOne(e).then(function(e){console.log("Words.deleteOne response: ",e),r(function(){n()},0)},function(e){console.error("Unable to delete word err: ",e)})},t.editWordComposer={selectedWord:"",select:function(e){this.selectedWord=angular.copy(e)},submit:function(){}},t.isPastDate=function(e){return moment(e).isSameOrBefore(moment())},t.formatLocalTime=function(e){return moment(e).local().format("M/D/YY [at] h:mma")}}function Words(o){return{getAll:function(e){var t=REST_URL+"/word"+(e?"?"+$.param(e):"");return o.get(t)},getOne:function(e,t){var r=REST_URL+"/word/"+e+(t?"?"+$.param(t):"");return o.get(r)},createOne:function(e){var t=REST_URL+"/word";return o.post(t,e)},deleteOne:function(e){var t=REST_URL+"/word/"+e;return o.delete(t)},updateOne:function(e,t){var r=REST_URL+"/word/"+e;return o.put(r,t)}}}-1!==origin.indexOf("//localhost:")||-1!==origin.indexOf("192.168.1.")?REST_URL="http://localhost:8555/api":REST_URL="http://shortform-demo-api.zenimus.com/api",console.log("REST_URL: ",REST_URL),angular.module("app",["ui.router","ui.bootstrap","ngAnimate"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,r){e.state("root",{abstract:!0,templateUrl:"views/root.html?rel=1551933369193",controller:"RootCtrl"}).state("root.play",{url:"/",templateUrl:"views/play.html?rel=1551933369193",controller:"PlayCtrl"}).state("root.settings",{url:"/settings",templateUrl:"views/settings.html?rel=1551933369193",controller:"SettingsCtrl"}),t.otherwise("/settings"),r.html5Mode({enabled:!0,requireBase:!0})}]).run(["$rootScope","$transitions","$state",function(e,t,r){e.VERSION=DEV.VERSION}]),angular.module("app").controller("PlayCtrl",["$scope","$state","$timeout","Words",PlayCtrl]),angular.module("app").controller("RootCtrl",["$scope","$state",RootCtrl]),angular.module("app").controller("SettingsCtrl",["$scope","$state","$timeout","Words",SettingsCtrl]),angular.module("app").factory("Words",["$http",Words]);
//# sourceMappingURL=production.min.js.map